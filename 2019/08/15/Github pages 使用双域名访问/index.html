<!-- build time:Fri Aug 16 2019 00:22:16 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="李恒东"><meta name="author" content="F7ionsy"><title>Github pages 使用双域名访问 | F7ionsy&#39;s blog</title><link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><section class="article-container"><a class="nav-back" href="/"><i class="fa fa-arrow-left"></i></a><header class="intro-header"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>Github pages 使用双域名访问</h1></div></div></div></div></header><article><div class="container"><div class="row"><div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p>最近买了个新域名<a href="https://f7ionsy.me/" target="_blank" rel="noopener">F7ionsy.me</a>，因为国情在此，.me域名国内已经无法注册和购买使用，没办法，只能去国外转转。货比三家之后，选择了<a href="https://porkbun.com/" target="_blank" rel="noopener">porkbun.com</a>家的。虽然他家不支持支付宝，但是国内的信用卡可以注册Paypal，绑定信用卡，谭厚支付，整个过程三分钟不到。治理要吐槽一下国内的支付应用，注册流程复杂且漫长，无力吐槽。可能还是因为国情吧，╮(╯▽╰)╭无奈。</p><p><img src="http://pvr286ojm.bkt.clouddn.com/snipaste_20190815_233200.png" alt="snipaste_20190815_233200.png"></p><p>买好了域名，国内时打不开的，嘿我这个暴脾气。国内的DNS污染也太严重了，porkbun.com官方提供的DNS解析国内时无效的，无奈换成了腾讯云的，蛮以为这样就可以像之前设置<a href="https://lihengdong.com/">lihengdong.com</a>一样直接指向<code>Github</code>仓库就ok了。然后找了半天才发现<code>Github pages</code>不支持绑定两个域名。这咋办，不能让新买的域名吃灰吧，于是去Google上找教程，搜了一圈也都是些二级跳转啥的，这不行，二级跳转也太慢了，虽然能访问，但是速度就是蜗牛。</p><p>辗转被我找到了<a href="https://app.netlify.com/" target="_blank" rel="noopener">app.netlify.com</a>这个网站，那么什么是<strong>Netlify</strong>？</p><p>它是一个提供静态资源网络托管的综合平台。</p><p>简单来说： 它的功能之一就跟我们之前Hexo博客的静态托管平台 <code>Github Page</code>一样, 不过，Netlify可比<code>Github Page</code>功能多多了，而且速度也快。两者的对比在<a href="https://www.netlify.com/github-pages-vs-netlify/" target="_blank" rel="noopener">netlify官网</a>有介绍。</p><p>简单来说它可以</p><ul><li>托管静态资源</li><li>将静态网站部署到CDN上</li><li>Continuous Deployment 持续部署，当你提交改变到git 仓库，它就会自动运行build command，进行自动部署。</li><li>可以添加自定义域名</li><li>重头戏：<strong>可以启用免费的TLS证书，启用HTTPS</strong></li></ul><p>详细部署教程这里就不说了，网上一大堆，这里要特别注意的是，不要在Netlify里添加域名相关的DNS和解析记录，一定要去域名的控制台修改。否则在Netlify中点击修改后，域名设置非但不会生效，而且会丢失设置方法，等你反应过来时，设置方法一营不再显示了，只有删除应用重新来过。</p><p>网上的教程一般说配置应用时使用分支部署，其实使用主分支部署也可以且分支部署相对来说钩子的生效时间会稍微长一点，对于<code>Hexo</code>博客来说，是不是主分支，不用在乎。</p><p>第三点需要注意的是，如果你的SSL证书是域名提供商下发给你的，那你填写SSL证书的时候，注意初级证书和中级证书是在domain.cert.pem的文件中的。这点也是个坑。</p><p>配置好之后，打开就是这个样子了，每一次自动部署都有logs。让我没想到的是，Netlify提供的DNS解析国内不仅可以使用甚至速度比腾讯云的还快了100ms左右，来来回回曲曲折折，没想到在这里曲线救国，哈哈哈。</p><p><img src="http://pvr286ojm.bkt.clouddn.com/snipaste_20190815_232008.png" alt="snipaste_20190815_232008.png"></p><p>相关：</p><p>添加域名记录集时，要注意根据Netlify上的提示添加ALIAS、A和txt记录，<strong>切记不要在Netlify里添加域名相关的DNS和解析记录，一定要去域名的控制台修改。</strong></p><p><img src="http://pvr286ojm.bkt.clouddn.com/snipaste_20190815_232419.png" alt="snipaste_20190815_232419.png"></p><p>DNS配置完成的样子：</p><p><img src="http://pvr286ojm.bkt.clouddn.com/snipaste_20190815_232754.png" alt="snipaste_20190815_232754.png"></p><p>SSL证书配置完成的样子：</p><p><img src="http://pvr286ojm.bkt.clouddn.com/snipaste_20190815_232844.png" alt="snipaste_20190815_232844.png"></p><p>#仅作记录，可能无法提供详细参考和教程使用，请知悉。</p><div class="post-meta"><hr><br><div class="post-tags"><a href="/tags/技术类/">#技术类</a></div><div class="post-date">2019 年 08 月 15 日</div></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"></div></div></div></article></section><link href="/css/viewer.min.css" rel="stylesheet"><script src="/js/viewer.min.js" type="text/javascript" charset="utf-8"></script><script type="text/javascript">// set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });</script><script type="text/javascript">console.log("© F7ionsy 🙋 2018-"+(new Date).getFullYear()),console.log("萱，如果你能看到这里，我想告诉你，我真的很想你。")</script><script text="module">"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then(function(){console.log("A new service worker is being installed.")})["catch"](function(e){console.log("Service worker registration failed:",e)}):console.log("Service workers are not supported.")</script></body></html><!-- rebuild by neat -->